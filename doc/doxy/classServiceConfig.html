<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>EPONImplementationforOMNet++: ServiceConfig Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">EPONImplementationforOMNet++
   &#160;<span id="projectnumber">0.8Beta</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classServiceConfig.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">ServiceConfig Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="ServiceConfig" -->
<p>A simple module to configure all the services in a scenario and their parameters.  
 <a href="classServiceConfig.html#details">More...</a></p>

<p><code>#include &lt;ServiceConfig.h&gt;</code></p>

<p><a href="classServiceConfig-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServiceConfig.html#a50471f114660139dd923d572cc3adbe1">ServiceConfig</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServiceConfig.html#a39818212348851fb1e0d5dfa077d21f6">getLowPriorityService</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the index of the service with the minimum priority.  <a href="#a39818212348851fb1e0d5dfa077d21f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServiceConfig.html#acffdfe46bf989996dbe4bb510aa53f5f">getHighPriorityService</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the index of the service with the maximum priority.  <a href="#acffdfe46bf989996dbe4bb510aa53f5f"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ServiceConfig_8h.html#aaf9dfd93fb9195bd4743e76b1a1ed879">SrvList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServiceConfig.html#ac5e8052ed9b672ef287549e46d2c3c00">initialize</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the configuration (parameters from the .ini file) and initialize the srvs members.  <a href="#ac5e8052ed9b672ef287549e46d2c3c00"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServiceConfig.html#a3537a2e953b8b582d6c746b196e945a6">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently dummy...  <a href="#a3537a2e953b8b582d6c746b196e945a6"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A simple module to configure all the services in a scenario and their parameters. </p>
<p>This module is accessible from any other module that needs this information, so we avoid declaring the same thing again and again.</p>
<p>Usually it is going to be accessed by the queue modules that need to take under consideration the service names and priorities. If there is no such module, the default values are going to be applied.</p>
<p>15-Feb-2011: Keep the services sorted by priority </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a50471f114660139dd923d572cc3adbe1"></a><!-- doxytag: member="ServiceConfig::ServiceConfig" ref="a50471f114660139dd923d572cc3adbe1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classServiceConfig.html#a50471f114660139dd923d572cc3adbe1">ServiceConfig::ServiceConfig</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="acffdfe46bf989996dbe4bb510aa53f5f"></a><!-- doxytag: member="ServiceConfig::getHighPriorityService" ref="acffdfe46bf989996dbe4bb510aa53f5f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classServiceConfig.html#acffdfe46bf989996dbe4bb510aa53f5f">ServiceConfig::getHighPriorityService</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the index of the service with the maximum priority. </p>
<div class="fragment"><pre class="fragment">                                         {
      <span class="keywordtype">double</span> max_p=-1;
      <span class="keywordtype">int</span> max_idx=0;
      <span class="keywordflow">for</span> (uint32_t i=1; i&lt;<a class="code" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a>.size(); i++){
            <span class="keywordflow">if</span> (<a class="code" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a>[i].priority &gt; max_p){
                  max_p   = <a class="code" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a>[i].priority;
                  max_idx = i;
            }
      }

      <span class="keywordflow">return</span> max_idx;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a39818212348851fb1e0d5dfa077d21f6"></a><!-- doxytag: member="ServiceConfig::getLowPriorityService" ref="a39818212348851fb1e0d5dfa077d21f6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classServiceConfig.html#a39818212348851fb1e0d5dfa077d21f6">ServiceConfig::getLowPriorityService</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the index of the service with the minimum priority. </p>
<div class="fragment"><pre class="fragment">                                        {
      <span class="keywordtype">double</span> min_p=100;
      <span class="keywordtype">int</span> min_idx=0;
      <span class="keywordflow">for</span> (uint32_t i=1; i&lt;<a class="code" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a>.size(); i++){
            <span class="keywordflow">if</span> (<a class="code" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a>[i].priority &lt; min_p){
                  min_p   = <a class="code" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a>[i].priority;
                  min_idx = i;
            }
      }

      <span class="keywordflow">return</span> min_idx;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3537a2e953b8b582d6c746b196e945a6"></a><!-- doxytag: member="ServiceConfig::handleMessage" ref="a3537a2e953b8b582d6c746b196e945a6" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classServiceConfig.html#a3537a2e953b8b582d6c746b196e945a6">ServiceConfig::handleMessage</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Currently dummy... </p>
<div class="fragment"><pre class="fragment">{
      <span class="comment">// IDEA: - Dynamic Service registration...</span>
      <span class="comment">// probably useless though...</span>
      <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac5e8052ed9b672ef287549e46d2c3c00"></a><!-- doxytag: member="ServiceConfig::initialize" ref="ac5e8052ed9b672ef287549e46d2c3c00" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classServiceConfig.html#ac5e8052ed9b672ef287549e46d2c3c00">ServiceConfig::initialize</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the configuration (parameters from the .ini file) and initialize the srvs members. </p>
<div class="fragment"><pre class="fragment">{
      <span class="comment">// Get the parameters</span>
      cStringTokenizer tok(par(<span class="stringliteral">&quot;services&quot;</span>).stringValue());
      std::vector&lt;string&gt; services=tok.asVector();
      cStringTokenizer tok2(par(<span class="stringliteral">&quot;srvPrior&quot;</span>).stringValue());
      std::vector&lt;double&gt; sp=tok2.asDoubleVector();
      cStringTokenizer tok3(par(<span class="stringliteral">&quot;vlanMap&quot;</span>).stringValue());
      std::vector&lt;int&gt; vlanmap=tok3.asIntVector();

      cStringTokenizer tok4(par(<span class="stringliteral">&quot;msrPerFlow&quot;</span>).stringValue());
      std::vector&lt;double&gt; msrs=tok4.asDoubleVector();
      cStringTokenizer tok5(par(<span class="stringliteral">&quot;mrrPerFlow&quot;</span>).stringValue());
      std::vector&lt;double&gt; mrrs=tok5.asDoubleVector();


      <span class="keywordflow">if</span> (sp.size() != services.size() || sp.size() != vlanmap.size() || sp.size() != msrs.size() ||sp.size() != mrrs.size() )
            error(<span class="stringliteral">&quot;ServiceConfig: You must configure a priority, a vlan  and an MSR-MRR for each service. \n - Vlan ID&quot;</span>
                        <span class="stringliteral">&quot; 0 means no vlan (native) \n - MSR -1 means unlimited service \n - MRR -1 means we don&#39;t care&quot;</span>);

      <span class="comment">// Initialize the map</span>
      <span class="keywordflow">for</span> (uint32_t i=0; i&lt;sp.size(); i++){
            <a class="code" href="struct__srv__item.html" title="The Service Item currently holds only name and priority.">SrvItem</a> sit;
            sit.<a class="code" href="struct__srv__item.html#afec61e3cfd8168ddbe18e9496f11e3f8">name</a> = services[i];
            sit.<a class="code" href="struct__srv__item.html#a9072a2c3c8963d40c468029195aa982a">priority</a> = sp[i];
            sit.<a class="code" href="struct__srv__item.html#a8161dc2da4951885ef7e511690554806">vlan</a> = vlanmap[i];
            sit.<a class="code" href="struct__srv__item.html#a375cf8a82c991ad33de024db2c3d6ea1">msr</a> = msrs[i];
            sit.<a class="code" href="struct__srv__item.html#aacc4efbe882e0989d6f0df38f2293d10">mrr</a> = mrrs[i];
            <a class="code" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a>.push_back(sit);
      }

      <span class="keywordtype">char</span> buf[50];
      sprintf(buf, <span class="stringliteral">&quot;%d Services&quot;</span>, (<span class="keywordtype">int</span>)<a class="code" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a>.size());
    getDisplayString().setTagArg(<span class="stringliteral">&quot;t&quot;</span>,0,buf);

    std::sort(<a class="code" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a>.begin(), <a class="code" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a>.end());
      WATCH_VECTOR(<a class="code" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">srvs</a>);
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aae38a67a9a8d29e9bcde6d2ab0a8f873"></a><!-- doxytag: member="ServiceConfig::srvs" ref="aae38a67a9a8d29e9bcde6d2ab0a8f873" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ServiceConfig_8h.html#aaf9dfd93fb9195bd4743e76b1a1ed879">SrvList</a> <a class="el" href="classServiceConfig.html#aae38a67a9a8d29e9bcde6d2ab0a8f873">ServiceConfig::srvs</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="ServiceConfig_8h.html">ServiceConfig.h</a></li>
<li><a class="el" href="ServiceConfig_8cc.html">ServiceConfig.cc</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="classServiceConfig.html">ServiceConfig</a>      </li>

    <li class="footer">Generated on Wed Oct 31 2012 20:10:52 for EPONImplementationforOMNet++ by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
