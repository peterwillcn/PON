<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>EPONImplementationforOMNet++: EPON for OMNeT++ (4.0 - 4.1)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>EPON for OMNeT++ (4.0 - 4.1) </h1><h3 class="version">0.7Beta </h3><h2><a class="anchor" id="DESCRIPTION">
DESCRIPTION</a></h2>
<p>This is a basic implementation of Ethernet Passive Optical Network. OLT and ONU modules are defined and they both support one or multiple LLIDs. <a class="el" href="classMPCP.html" title="Class generated from common/EPON_messages.msg by opp_msgc.">MPCP</a> protocol has been implemented on OLT and ONU models to assign LLIDs dynamically. The devices are implemented in a structured way per network Layer and basic goal is to keep them extensible. Different Queue Management, Relay and traffic classification modules should be easily integrated into the existing devices using the same MAC and MAC Control Layers.</p>
<div align="center">
<img src="../images/screenshot_small.jpeg" alt="screenshot_small.jpeg"/>
<p><strong>Preview</strong></p></div>
<h2><a class="anchor" id="BASIC">
FEATURES</a></h2>
<h3><a class="anchor" id="PON_Splitter">
PON_Splitter</a></h3>
<p>Simple passive splitting. On collision, the module discards the second frame while the first one has already been transmitted. Also it counts upstream and downstream collisions. This should actually never happen, but is really useful if you want to change the TDMA functions.</p>
<h3><a class="anchor" id="a">
MPCP Protocol implementation</a></h3>
<p>The current implementation varies a bit from the RFCs on the registration process. It currently send the GATE message AFTER the ONU acknowledgment, while the drafts say that the GATE should be sent right after the REGISTER message. This way we avoid allocating resources for an ONU that may not send ACK message later. Actually it just simplifies the upstream bandwidth allocation.</p>
<h3><a class="anchor" id="Layers">
Layers</a></h3>
<ul>
<li><b>MAC</b>: A copy of the INET MAC layer with some changes. First it sends messages of type <a class="el" href="classEtherFrameWithLLID.html" title="Class generated from common/EPON_messages.msg by opp_msgc.">EtherFrameWithLLID</a>, which are actually Ethernet frames but in the preamble they include the LLID. So EPON_PREAMBLE_BYTES is now (7 - 2) and the frame structure is changed. These frames encapsulate the real Ethernet ones. Second, when the interface is IDLE and wakes-up it _will_ wait for IFG time before transmitting (instead of transmitting directly as in the original implementation)</li>
</ul>
<ul>
<li><b>MacCtl</b>: is used to handle time registers on both ONU and OLT. It is also responsible for transmitting to the lower layer at proper time. Currently it seems to work :-) but if you don't want to mess up, try not to touch it... I have spent da ys in order to achieve the TDMA. IF you see collisions in the Splitter module it means that something went wrong. The provided implementation achieves syncronization from the global simulation time and it is _not_ polling based [http: *www.ieee802.org/3/efm/public/jul01/presentations/kramer_1_0701.pdf]. From release 0.7b, this module is an interface, and thus easier for someone to create a polling based MAC.</li>
</ul>
<ul>
<li><b>Q_mgmt</b>: This modules are responsible for queue management. A simple Round Robin implementation is provided. Bandwidth allocation should be calculated here. This module is extensible and a module interface has been used in the model. So you can replace it with your own module having different functionality.</li>
</ul>
<ul>
<li><b>EPON_Relay</b>: This module implements a switch between the MAC interface and the PON interface. It takes under consideration the LLIDs on the PON network and the VLANs on the Ethernet one. This module is extensible and a module interface has been used in the model. So you can replace it with your own module having different functionality.</li>
</ul>
<h2><a class="anchor" id="INSTALLATION">
INSTALLATION</a></h2>
<h3><a class="anchor" id="Dependencies">
Dependencies</a></h3>
<ol type="1">
<li>OMNet++ versions 4.0 or 4.1 (http: *omnetpp.org/omnetpp/cat_view/17-downloads/1-omnet-releases/4-older-versions)</li>
<li>INET or INET/MANET FrameWork for the above versions (http: *inet.omnetpp.org/index.php?n=Main.Download)</li>
<li>This version depends on a smaller project for 802.1Q vlans that comes in the same archive.</li>
</ol>
<p>Installation should be straight forward. OMNet++ 4.0 and INET framework are required. Steps:</p>
<ul>
<li>Open Omnet++ IDE</li>
<li>Import and compile INET project</li>
<li>Extract the PON_&lt;version&gt;.tar.gz file</li>
<li>Import Vlans project by selecting the Vlans folder of the extracted archive<ul>
<li>Setup the Project References to point to your INET</li>
<li>Compile</li>
</ul>
</li>
<li>Import EPON project by selecting the PON folder of the extracted archive<ul>
<li>Setup the Project References to: Vlans and INET</li>
</ul>
</li>
<li>Add the PON project to the project references of your work (optional - if you are building in an external proj./folder)</li>
<li>Now everything should work...</li>
</ul>
<h3><a class="anchor" id="Troubleshooting">
Troubleshooting</a></h3>
<p>Some common errors, I usually receive emails for, are listed bellow:</p>
<p>1. "inetmanet/src/linklayer/contract/Ieee802Ctrl_m.h:83:5: error: expected identifier before numeric constant" There are some illegal characters in the file Ieee802Ctrl.msg and specifically in the "enum EtherType". Solutions:</p>
<ul>
<li>Fast 'n' Dirty: Delete the enum if you do not need it!</li>
<li>Decent: Open the file (.msg) with a HEX editor and remove the weird characters</li>
</ul>
<p>2. "Conversion from 'cPar' to 'uint64_t' is ambiguous" Some casting is needed i.e: datarateLimit=(uint64_t)par("datarateLimit");</p>
<h2><a class="anchor" id="NOTES">
NOTES</a></h2>
<p>Tested on:</p>
<ul>
<li>omnetpp-4.1<br/>
</li>
<li>omnetpp-4.0p1 <br/>
</li>
</ul>
<p>With many inetmanet versions but...: <b>Latest INET versions will not work (v2). The same for OMNet++ 4.2!</b>. You need to get OMNet++ 4.1 and compatible INET! Porting will not be done (not now at least - Any ported code is more than welcome)</p>
<p>For any comments or corrections email me at <a href="mailto:bodozoglou@gmail.com">bodozoglou@gmail.com</a></p>
<p>I hope it works for you...<br/>
 Andreas </p>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Sun Mar 18 14:17:50 2012 for EPONImplementationforOMNet++ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
